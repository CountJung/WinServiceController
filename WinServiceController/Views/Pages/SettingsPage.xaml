<Page
  x:Class="WinServiceController.Views.Pages.SettingsPage"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:helpers="clr-namespace:WinServiceController.Helpers"
  xmlns:local="clr-namespace:WinServiceController.Views.Pages"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
  Title="SettingsPage"
  d:DataContext="{d:DesignInstance local:SettingsPage,
                                     IsDesignTimeCreatable=False}"
  d:DesignHeight="450"
  d:DesignWidth="800"
  ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
  ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
  Foreground="{DynamicResource TextFillColorPrimaryBrush}"
  mc:Ignorable="d"
>
  <Page.Resources>
    <helpers:EnumToBooleanConverter x:Key="EnumToBooleanConverter" />
  </Page.Resources>
  <ScrollViewer VerticalScrollBarVisibility="Auto">
    <StackPanel Margin="0,0,0,24">
      <!-- Theme -->
      <TextBlock FontSize="20" FontWeight="Medium" Text="Personalization" />
      <TextBlock Margin="0,12,0,0" Text="Theme" />
      <RadioButton
        Margin="0,12,0,0"
        Command="{Binding ViewModel.ChangeThemeCommand, Mode=OneWay}"
        CommandParameter="theme_system"
        Content="System"
        GroupName="themeSelect"
        IsChecked="{Binding ViewModel.CurrentTheme, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=Unknown, Mode=OneWay}"
      />
      <RadioButton
        Margin="0,8,0,0"
        Command="{Binding ViewModel.ChangeThemeCommand, Mode=OneWay}"
        CommandParameter="theme_light"
        Content="Light"
        GroupName="themeSelect"
        IsChecked="{Binding ViewModel.CurrentTheme, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=Light, Mode=OneWay}"
      />
      <RadioButton
        Margin="0,8,0,0"
        Command="{Binding ViewModel.ChangeThemeCommand, Mode=OneWay}"
        CommandParameter="theme_dark"
        Content="Dark"
        GroupName="themeSelect"
        IsChecked="{Binding ViewModel.CurrentTheme, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=Dark, Mode=OneWay}"
      />

      <!-- System Tray -->
      <TextBlock Margin="0,24,0,0" FontSize="20" FontWeight="Medium" Text="System Tray" />
      <CheckBox
        Margin="0,12,0,0"
        Content="Minimize to system tray on close"
        IsChecked="{Binding ViewModel.MinimizeToTray, Mode=TwoWay}"
      />
      <CheckBox
        Margin="0,8,0,0"
        Content="Don't show tray notification"
        IsChecked="{Binding ViewModel.SuppressTrayNotification, Mode=TwoWay}"
      />

      <!-- Startup -->
      <TextBlock Margin="0,24,0,0" FontSize="20" FontWeight="Medium" Text="Startup" />
      <CheckBox
        Margin="0,12,0,0"
        Content="Start with Windows"
        IsChecked="{Binding ViewModel.StartWithWindows, Mode=TwoWay}"
      />

      <!-- C++ Engine Path -->
      <TextBlock Margin="0,24,0,0" FontSize="20" FontWeight="Medium" Text="Monitoring Engine" />
      <TextBlock Margin="0,8,0,0" FontSize="12" Opacity="0.6" Text="ServiceMonitorCore.exe path (for install/uninstall)" />
      <Grid Margin="0,8,0,0">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <ui:TextBox
          Grid.Column="0"
          PlaceholderText="Path to ServiceMonitorCore.exe..."
          Text="{Binding ViewModel.CppServiceExePath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
        />
        <ui:Button
          Grid.Column="1"
          Margin="8,0,0,0"
          Command="{Binding ViewModel.BrowseCppServicePathCommand, Mode=OneWay}"
          Content="Browse"
          Icon="{ui:SymbolIcon FolderOpen24}"
        />
      </Grid>

      <!-- Chart Settings -->
      <TextBlock Margin="0,24,0,0" FontSize="20" FontWeight="Medium" Text="Chart" />

      <TextBlock Margin="0,12,0,0" FontSize="12" Opacity="0.6" Text="X-axis time window (seconds)" />
      <ui:TextBox
        Margin="0,4,0,0"
        MaxWidth="200"
        HorizontalAlignment="Left"
        PlaceholderText="7200"
        Text="{Binding ViewModel.ChartWindowSeconds, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"
      />

      <TextBlock Margin="0,12,0,0" FontSize="12" Opacity="0.6" Text="CPU Y-axis max (%)" />
      <ui:TextBox
        Margin="0,4,0,0"
        MaxWidth="200"
        HorizontalAlignment="Left"
        PlaceholderText="100"
        Text="{Binding ViewModel.ChartCpuYMax, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"
      />

      <TextBlock Margin="0,12,0,0" FontSize="12" Opacity="0.6" Text="Memory Y-axis max (MB, 0 = auto)" />
      <ui:TextBox
        Margin="0,4,0,0"
        MaxWidth="200"
        HorizontalAlignment="Left"
        PlaceholderText="0"
        Text="{Binding ViewModel.ChartMemoryYMax, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"
      />

      <TextBlock Margin="0,12,0,0" FontSize="12" Opacity="0.6" Text="Y-axis top margin (%)" />
      <ui:TextBox
        Margin="0,4,0,0"
        MaxWidth="200"
        HorizontalAlignment="Left"
        PlaceholderText="10"
        Text="{Binding ViewModel.ChartYMarginPercent, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"
      />

      <!-- About -->
      <TextBlock Margin="0,24,0,0" FontSize="20" FontWeight="Medium" Text="About Service Monitor" />
      <TextBlock Margin="0,12,0,0" Text="{Binding ViewModel.AppVersion, Mode=OneWay}" />
    </StackPanel>
  </ScrollViewer>
</Page>
